(this["webpackJsonpmurdur-rpg-system"]=this["webpackJsonpmurdur-rpg-system"]||[]).push([[0],{13:function(e,t,a){e.exports=a(22)},18:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n,r,i,l,c,o,s,u,m,p,d,h,b,f,y,v,g,O,j,w,E,k,S,x,z,D,W,q=a(0),C=a.n(q),N=a(10),R=a.n(N),L=(a(18),a(2)),A=a(5),H=a(7),I=a(6),T=a(8),M=a(3),B=a(4),P=(a(11),a(1)),K=new(n=function(){function e(){var t=this;Object(L.a)(this,e),Object(M.a)(this,"soundEnabled",r,this),Object(M.a)(this,"player",i,this),this.playerAudioRef=C.a.createRef(),this.toggleAudioOn=function(){t.soundEnabled=!t.soundEnabled}}return Object(A.a)(e,[{key:"playAudio",value:function(e,t){"player"===e&&this.player[t]&&this.playerAudioRef.current&&this.soundEnabled&&this.playerAudioRef.current.paused&&(this.playerAudioRef.current.src=this.player[t].src,this.playerAudioRef.current.play())}}]),e}(),r=Object(B.a)(n.prototype,"soundEnabled",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=Object(B.a)(n.prototype,"player",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{hitwall:{src:"/murdur-rpg-system/audio/ouch.mp3"}}}}),n),U={0:{name:"Iron Sword",baseValue:10,canBeEquiped:!0,equipmentType:"weapon"},1:{name:"Iron Shield",baseValue:10,canBeEquiped:!0,equipmentType:"shield"},2:{name:"Iron Helmet",baseValue:10,canBeEquiped:!0,equipmentType:"head-armour"},3:{name:"Iron Cuirass",baseValue:10,canBeEquiped:!0,equipmentType:"body-armour"},4:{name:"Iron Bracers",baseValue:10,canBeEquiped:!0,equipmentType:"hand-armour"}},V=function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(L.a)(this,e),this.levelSections=[],this.size=void 0,this.discoveredSections={},this.markSectionDiscovered=function(e){t.discoveredSections["".concat(e[0],"-").concat(e[1])]={tile:!0,modifier:!0,leftWall:!0,topWall:!0},t.discoveredSections["".concat(e[0]+1,"-").concat(e[1])]&&(t.discoveredSections["".concat(e[0]+1,"-").concat(e[1])].leftWall=!0),t.discoveredSections["".concat(e[0],"-").concat(e[1]+1)]&&(t.discoveredSections["".concat(e[0],"-").concat(e[1]+1)].topWall=!0)},this.isSectionDiscovered=function(e){return!!t.discoveredSections["".concat(e[0],"-").concat(e[1])]&&t.discoveredSections["".concat(e[0],"-").concat(e[1])].tile},this.randomlyPopulateMap=function(){for(var e=0;e<t.size;e++)for(var a=0;a<t.size;a++)t.levelSections.push({coords:[a,e],leftWall:t.getRandomWall(),topWall:t.getRandomWall(),terrain:t.getRandomTerrain()}),t.discoveredSections["".concat(a,"-").concat(e)]={tile:!1,modifier:!1,leftWall:!1,topWall:!1}},this.getRandomWall=function(){var e=Math.round(1+4*Math.random());return e>=4?"wall":1===e?"door":"none"},this.getRandomTerrain=function(){switch(Math.round(1+6*Math.random())){case 1:return"sand";case 2:return"water";default:return"none"}},this.size=a,n&&this.randomlyPopulateMap()},G=new(l=function(){function e(){Object(L.a)(this,e),Object(M.a)(this,"level1",c,this),Object(M.a)(this,"markSectionDiscovered",o,this),this.level1=new V(30)}return Object(A.a)(e,[{key:"getSectionDiscovered",value:function(e){return this.level1.discoveredSections["".concat(e[0],"-").concat(e[1])]}},{key:"getSectionByCoords",value:function(e){return this.level1.levelSections.find((function(t){return e[0]===t.coords[0]&&e[1]===t.coords[1]}))}}]),e}(),c=Object(B.a)(l.prototype,"level1",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=Object(B.a)(l.prototype,"markSectionDiscovered",[P.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.level1.markSectionDiscovered(t)}}}),l),J=new(s=function e(){var t=this;Object(L.a)(this,e),Object(M.a)(this,"messages",u,this),this.messagePanelScrollRef=C.a.createRef(),this.addMessage=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";t.messages.push({text:e,type:a}),t.scrollMessagesToBottom()},this.scrollMessagesToBottom=function(){var e=t.messagePanelScrollRef.current;e&&(e.scrollTop=e.scrollHeight)}},u=Object(B.a)(s.prototype,"messages",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{text:"Welcome to MURDUR 0.1!",type:"normal"}]}}),s),F={west:"north",north:"east",east:"south",south:"west"},Y={west:"south",north:"west",east:"north",south:"east"},$=new(m=function e(){var t=this;Object(L.a)(this,e),Object(M.a)(this,"age",p,this),Object(M.a)(this,"alignment",d,this),Object(M.a)(this,"race",h,this),Object(M.a)(this,"sex",b,this),Object(M.a)(this,"level",f,this),Object(M.a)(this,"maxHits",y,this),Object(M.a)(this,"currentHits",v,this),Object(M.a)(this,"experience",g,this),Object(M.a)(this,"gold",O,this),Object(M.a)(this,"stats",j,this),Object(M.a)(this,"playerLocation",w,this),Object(M.a)(this,"playerDirection",E,this),Object(M.a)(this,"playerInventory",k,this),Object(M.a)(this,"equippedRightHand",S,this),Object(M.a)(this,"equippedLeftHand",x,this),Object(M.a)(this,"equippedHelmet",z,this),Object(M.a)(this,"equippedBodyArmour",D,this),Object(M.a)(this,"equippedHandArmour",W,this),this.setPlayerLocation=function(e){t.playerLocation=e},this.rotatePlayerClockwise=function(){t.playerDirection=F[t.playerDirection]},this.rotatePlayerCounterClockwise=function(){t.playerDirection=Y[t.playerDirection]}},p=Object(B.a)(m.prototype,"age",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),d=Object(B.a)(m.prototype,"alignment",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"good"}}),h=Object(B.a)(m.prototype,"race",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"elf"}}),b=Object(B.a)(m.prototype,"sex",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"female"}}),f=Object(B.a)(m.prototype,"level",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=Object(B.a)(m.prototype,"maxHits",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),v=Object(B.a)(m.prototype,"currentHits",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),g=Object(B.a)(m.prototype,"experience",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),O=Object(B.a)(m.prototype,"gold",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=Object(B.a)(m.prototype,"stats",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{strength:10,intelligence:10,wisdom:10,constitution:10,charisma:10,dexterity:10}}}),w=Object(B.a)(m.prototype,"playerLocation",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[15,15]}}),E=Object(B.a)(m.prototype,"playerDirection",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"north"}}),k=Object(B.a)(m.prototype,"playerInventory",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{itemId:0},{itemId:1,alignment:"good"},{itemId:2},{itemId:3},{itemId:4,alignment:"neutral"}]}}),S=Object(B.a)(m.prototype,"equippedRightHand",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=Object(B.a)(m.prototype,"equippedLeftHand",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=Object(B.a)(m.prototype,"equippedHelmet",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=Object(B.a)(m.prototype,"equippedBodyArmour",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=Object(B.a)(m.prototype,"equippedHandArmour",[P.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m),Q={audioStore:K,itemsStore:U,levelStore:G,messageStore:J,playerStore:$},X=q.createContext(Q),Z=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(H.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(r)))).context=void 0,a}return Object(T.a)(t,e),t}(q.Component);Z.contextType=X;var _,ee,te,ae,ne,re=a(9),ie=Object(re.a)(_=function(e){function t(){return Object(L.a)(this,t),Object(H.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.context.audioStore;return C.a.createElement(C.a.Fragment,null,C.a.createElement("div",{className:"toggle-audio-button",onClick:e.toggleAudioOn},e.soundEnabled?C.a.createElement("img",{src:"/murdur-rpg-system/images/audioOn.png",alt:"switch audio on/off"}):C.a.createElement("img",{src:"/murdur-rpg-system/images/audioOff.png",alt:"switch audio on/off"})),C.a.createElement("audio",{ref:e.playerAudioRef}))}}]),t}(Z))||_,le=function(){return C.a.createElement("div",null)},ce=Object(re.a)(ee=function(e){function t(){return Object(L.a)(this,t),Object(H.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.context.playerStore;return C.a.createElement("div",{className:"character-info-panel"},C.a.createElement("div",{className:"character-alignment"},"".concat(e.sex," ").concat(e.race," (").concat(e.alignment,") (").concat(e.level,")")),C.a.createElement("ul",{className:"character-current-info"},C.a.createElement("li",{key:"age"},C.a.createElement("span",null,"Age"),C.a.createElement("span",null,e.age)),C.a.createElement("li",{key:"hits"},C.a.createElement("span",null,"Hits"),C.a.createElement("span",null,"".concat(e.currentHits,"/").concat(e.maxHits))),C.a.createElement("li",{key:"xp"},C.a.createElement("span",null,"Experience"),C.a.createElement("span",null,e.experience)),C.a.createElement("li",{key:"gold"},C.a.createElement("span",null,"Gold"),C.a.createElement("span",null,e.gold))),C.a.createElement("ul",{className:"character-stats"},C.a.createElement("li",{key:"strength"},C.a.createElement("span",null,"Strength"),C.a.createElement("span",null,e.stats.strength)),C.a.createElement("li",{key:"intelligence"},C.a.createElement("span",null,"Intelligence"),C.a.createElement("span",null,e.stats.intelligence)),C.a.createElement("li",{key:"wisdom"},C.a.createElement("span",null,"Wisdom"),C.a.createElement("span",null,e.stats.wisdom)),C.a.createElement("li",{key:"constitution"},C.a.createElement("span",null,"Constitution"),C.a.createElement("span",null,e.stats.constitution)),C.a.createElement("li",{key:"charisma"},C.a.createElement("span",null,"Charisma"),C.a.createElement("span",null,e.stats.charisma)),C.a.createElement("li",{key:"dexterity"},C.a.createElement("span",null,"Dexterity"),C.a.createElement("span",null,e.stats.dexterity))))}}]),t}(Z))||ee,oe=[{name:"Stats",id:"stats"},{name:"Resist",id:"resist"},{name:"Char",id:"char"},{name:"Guild",id:"guild"}],se=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(H.a)(this,Object(I.a)(t).call(this,e))).changeTab=function(e){a.setState({activeTab:e})},a.state={activeTab:"stats"},a}return Object(T.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this,t=this.state.activeTab;return C.a.createElement("div",{className:"character-stats"},C.a.createElement("div",{className:"character-name"},"Reggie Plop Plops"),C.a.createElement("div",{className:"top-tabs"},oe.map((function(a){return C.a.createElement("div",{className:"tab ".concat(t===a.id?"active":""),onClick:function(){e.changeTab(a.id)}},a.name)}))),"stats"===t&&C.a.createElement(ce,null))}}]),t}(C.a.Component),ue=Object(re.a)(te=function(e){function t(){return Object(L.a)(this,t),Object(H.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.context,t=e.itemsStore,a=e.playerStore;return C.a.createElement("div",{className:"character-inventory"},C.a.createElement("ol",{className:"character-inventory-list"},a.playerInventory.map((function(e,a){var n=t[e.itemId];return n?C.a.createElement("li",null,"".concat(n.name," ").concat(e.alignment?"("+e.alignment.charAt(0)+")":"")):null}))))}}]),t}(Z))||te,me={37:"counter-clockwise",38:"forward",39:"clockwise",40:"backward"},pe={west:[0,0],north:[0,0],east:[1,0],south:[0,1]},de={west:[-1,0],north:[0,-1],east:[1,0],south:[0,1]},he=new(function(){function e(){var t=this;Object(L.a)(this,e),this.handleKeyDown=function(e){switch(me[e.keyCode]){case"counter-clockwise":$.rotatePlayerCounterClockwise();break;case"clockwise":$.rotatePlayerClockwise();break;case"forward":t.moveDirection($.playerDirection)?J.addMessage("You walked ".concat($.playerDirection.toUpperCase())):K.playAudio("player","hitwall")}}}return Object(A.a)(e,[{key:"moveDirection",value:function(e){if(this.checkMoveWallCollision(e)){var t=de[e],a=[$.playerLocation[0]+t[0],$.playerLocation[1]+t[1]];return G.level1.markSectionDiscovered(a),$.setPlayerLocation(a),!0}return!1}},{key:"checkMoveWallCollision",value:function(e){var t=pe[e],a=G.getSectionByCoords([$.playerLocation[0]+t[0],$.playerLocation[1]+t[1]]);return"north"===e||"south"===e?a&&"wall"!==a.topWall&&$.playerLocation[1]+t[1]>=1:a&&"wall"!==a.leftWall&&$.playerLocation[0]+t[0]>=1}},{key:"setupKeyboardListeners",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"removeKeyboardListeners",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}}]),e}()),be=Object(re.a)(ae=function(e){function t(){return Object(L.a)(this,t),Object(H.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(A.a)(t,[{key:"componentWillMount",value:function(){this.context.levelStore.level1.markSectionDiscovered(this.context.playerStore.playerLocation)}},{key:"componentDidMount",value:function(){he.setupKeyboardListeners()}},{key:"componentWillUnmount",value:function(){he.removeKeyboardListeners()}},{key:"render",value:function(){var e=this.context,t=e.levelStore,a=e.playerStore,n=a.playerLocation,r=a.playerDirection;return C.a.createElement("div",{className:"explore-map"},C.a.createElement("div",{className:"map-container",style:{width:14*t.level1.size,height:14*t.level1.size}},t.level1.levelSections.map((function(e){var a=e.coords[0]===n[0]&&e.coords[1]===n[1],i=t.getSectionDiscovered(e.coords),l="".concat(i.leftWall?"wall-left-"+e.leftWall:""," ").concat(i.topWall?"wall-top-"+e.topWall:""),c=i.tile?"map-square "+l+" discovered-"+e.terrain:"map-square "+l;return C.a.createElement("div",{key:e.coords[0]+"-"+e.coords[1],className:c},a?C.a.createElement("img",{src:"/murdur-rpg-system/images/arrowUp-pink.png",alt:"player",className:"player-sprite "+r}):null)}))))}}]),t}(Z))||ae,fe=Object(re.a)(ne=function(e){function t(){return Object(L.a)(this,t),Object(H.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.context.messageStore;return C.a.createElement("div",{className:"explore-messages",ref:e.messagePanelScrollRef},C.a.createElement("ul",null,e.messages.map((function(e,t){return C.a.createElement("li",{key:"message-"+t},e.text)}))))}}]),t}(Z))||ne,ye=function(e){function t(e){var a;return Object(L.a)(this,t),(a=Object(H.a)(this,Object(I.a)(t).call(this,e))).state={},a}return Object(T.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return C.a.createElement("div",{className:"explore-screen"},C.a.createElement("div",{className:"character-menu"},C.a.createElement(se,null),C.a.createElement(ue,null),C.a.createElement("div",{className:"party"})),C.a.createElement("div",{className:"explore-pane"},C.a.createElement("div",{className:"expore-encounter"}),C.a.createElement(be,null),C.a.createElement(fe,null)))}}]),t}(C.a.Component);a(21);var ve=function(){return C.a.createElement("div",{className:"App"},C.a.createElement(le,null),C.a.createElement(ye,null),C.a.createElement(ie,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));R.a.render(C.a.createElement(ve,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.33898cca.chunk.js.map