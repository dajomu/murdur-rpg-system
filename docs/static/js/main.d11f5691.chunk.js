(this["webpackJsonpmurdur-rpg-system"]=this["webpackJsonpmurdur-rpg-system"]||[]).push([[0],{13:function(e,t,a){e.exports=a(22)},18:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n,r,i,c,l,o,s,u,m,d,h,p,b,f,v,y,g,O,j,E,w=a(0),k=a.n(w),S=a(10),x=a.n(S),W=(a(18),a(2)),z=a(5),N=a(7),R=a(6),L=a(8),D=a(3),C=a(4),M=(a(11),a(1)),A=new(n=function(){function e(){var t=this;Object(W.a)(this,e),Object(D.a)(this,"soundEnabled",r,this),Object(D.a)(this,"player",i,this),this.playerAudioRef=k.a.createRef(),this.toggleAudioOn=function(){t.soundEnabled=!t.soundEnabled}}return Object(z.a)(e,[{key:"playAudio",value:function(e,t){"player"===e&&this.player[t]&&this.playerAudioRef.current&&this.soundEnabled&&this.playerAudioRef.current.paused&&(this.playerAudioRef.current.src=this.player[t].src,this.playerAudioRef.current.play())}}]),e}(),r=Object(C.a)(n.prototype,"soundEnabled",[M.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=Object(C.a)(n.prototype,"player",[M.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{hitwall:{src:"/murdur-rpg-system/audio/ouch.mp3"}}}}),n),T=function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(W.a)(this,e),this.levelSections=[],this.size=void 0,this.discoveredSections={},this.markSectionDiscovered=function(e){t.discoveredSections["".concat(e[0],"-").concat(e[1])]={tile:!0,modifier:!0,leftWall:!0,topWall:!0},t.discoveredSections["".concat(e[0]+1,"-").concat(e[1])]&&(t.discoveredSections["".concat(e[0]+1,"-").concat(e[1])].leftWall=!0),t.discoveredSections["".concat(e[0],"-").concat(e[1]+1)]&&(t.discoveredSections["".concat(e[0],"-").concat(e[1]+1)].topWall=!0)},this.isSectionDiscovered=function(e){return!!t.discoveredSections["".concat(e[0],"-").concat(e[1])]&&t.discoveredSections["".concat(e[0],"-").concat(e[1])].tile},this.randomlyPopulateMap=function(){for(var e=0;e<t.size;e++)for(var a=0;a<t.size;a++)t.levelSections.push({coords:[a,e],leftWall:t.getRandomWall(),topWall:t.getRandomWall(),terrain:t.getRandomTerrain()}),t.discoveredSections["".concat(a,"-").concat(e)]={tile:!1,modifier:!1,leftWall:!1,topWall:!1}},this.getRandomWall=function(){var e=Math.round(1+4*Math.random());return e>=4?"wall":1===e?"door":"none"},this.getRandomTerrain=function(){switch(Math.round(1+6*Math.random())){case 1:return"sand";case 2:return"water";default:return"none"}},this.size=a,n&&this.randomlyPopulateMap()},P=new(c=function(){function e(){Object(W.a)(this,e),Object(D.a)(this,"level1",l,this),Object(D.a)(this,"markSectionDiscovered",o,this),this.level1=new T(30)}return Object(z.a)(e,[{key:"getSectionDiscovered",value:function(e){return this.level1.discoveredSections["".concat(e[0],"-").concat(e[1])]}},{key:"getSectionByCoords",value:function(e){return this.level1.levelSections.find((function(t){return e[0]===t.coords[0]&&e[1]===t.coords[1]}))}}]),e}(),l=Object(C.a)(c.prototype,"level1",[M.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=Object(C.a)(c.prototype,"markSectionDiscovered",[M.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.level1.markSectionDiscovered(t)}}}),c),H=new(s=function e(){var t=this;Object(W.a)(this,e),Object(D.a)(this,"messages",u,this),this.messagePanelScrollRef=k.a.createRef(),this.addMessage=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";t.messages.push({text:e,type:a}),t.scrollMessagesToBottom()},this.scrollMessagesToBottom=function(){var e=t.messagePanelScrollRef.current;e&&(e.scrollTop=e.scrollHeight)}},u=Object(C.a)(s.prototype,"messages",[M.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{text:"Welcome to MURDUR 0.1!",type:"normal"}]}}),s),K=new(m=function e(){var t=this;Object(W.a)(this,e),Object(D.a)(this,"age",d,this),Object(D.a)(this,"alignment",h,this),Object(D.a)(this,"race",p,this),Object(D.a)(this,"sex",b,this),Object(D.a)(this,"level",f,this),Object(D.a)(this,"maxHits",v,this),Object(D.a)(this,"currentHits",y,this),Object(D.a)(this,"experience",g,this),Object(D.a)(this,"gold",O,this),Object(D.a)(this,"stats",j,this),Object(D.a)(this,"playerLocation",E,this),this.setPlayerLocation=function(e){t.playerLocation=e}},d=Object(C.a)(m.prototype,"age",[M.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),h=Object(C.a)(m.prototype,"alignment",[M.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Good"}}),p=Object(C.a)(m.prototype,"race",[M.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Elf"}}),b=Object(C.a)(m.prototype,"sex",[M.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Female"}}),f=Object(C.a)(m.prototype,"level",[M.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=Object(C.a)(m.prototype,"maxHits",[M.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),y=Object(C.a)(m.prototype,"currentHits",[M.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),g=Object(C.a)(m.prototype,"experience",[M.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),O=Object(C.a)(m.prototype,"gold",[M.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=Object(C.a)(m.prototype,"stats",[M.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{strength:10,intelligence:10,wisdom:10,constitution:10,charisma:10,dexterity:10}}}),E=Object(C.a)(m.prototype,"playerLocation",[M.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[15,15]}}),m),B={audioStore:A,levelStore:P,messageStore:H,playerStore:K},U=w.createContext(B),G=function(e){function t(){var e,a;Object(W.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(N.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).context=void 0,a}return Object(L.a)(t,e),t}(w.Component);G.contextType=U;var q,F,I,J,Y=a(9),$=Object(Y.a)(q=function(e){function t(){return Object(W.a)(this,t),Object(N.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.context.audioStore;return k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"toggle-audio-button",onClick:e.toggleAudioOn},e.soundEnabled?k.a.createElement("img",{src:"/murdur-rpg-system/images/audioOn.png",alt:"switch audio on/off"}):k.a.createElement("img",{src:"/murdur-rpg-system/images/audioOff.png",alt:"switch audio on/off"})),k.a.createElement("audio",{ref:e.playerAudioRef}))}}]),t}(G))||q,Q=function(){return k.a.createElement("div",null)},V=Object(Y.a)(F=function(e){function t(){return Object(W.a)(this,t),Object(N.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.context.playerStore;return k.a.createElement("div",{className:"character-info-panel"},k.a.createElement("div",{className:"character-alignment"},"".concat(e.sex," ").concat(e.race," (").concat(e.alignment,") (").concat(e.level,")")),k.a.createElement("ul",{className:"character-current-info"},k.a.createElement("li",{key:"age"},k.a.createElement("span",null,"Age"),k.a.createElement("span",null,e.age)),k.a.createElement("li",{key:"hits"},k.a.createElement("span",null,"Hits"),k.a.createElement("span",null,"".concat(e.currentHits,"/").concat(e.maxHits))),k.a.createElement("li",{key:"xp"},k.a.createElement("span",null,"Experience"),k.a.createElement("span",null,e.experience)),k.a.createElement("li",{key:"gold"},k.a.createElement("span",null,"Gold"),k.a.createElement("span",null,e.gold))),k.a.createElement("ul",{className:"character-stats"},k.a.createElement("li",{key:"strength"},k.a.createElement("span",null,"Strength"),k.a.createElement("span",null,e.stats.strength)),k.a.createElement("li",{key:"intelligence"},k.a.createElement("span",null,"Intelligence"),k.a.createElement("span",null,e.stats.intelligence)),k.a.createElement("li",{key:"wisdom"},k.a.createElement("span",null,"Wisdom"),k.a.createElement("span",null,e.stats.wisdom)),k.a.createElement("li",{key:"constitution"},k.a.createElement("span",null,"Constitution"),k.a.createElement("span",null,e.stats.constitution)),k.a.createElement("li",{key:"charisma"},k.a.createElement("span",null,"Charisma"),k.a.createElement("span",null,e.stats.charisma)),k.a.createElement("li",{key:"dexterity"},k.a.createElement("span",null,"Dexterity"),k.a.createElement("span",null,e.stats.dexterity))))}}]),t}(G))||F,X=[{name:"Stats",id:"stats"},{name:"Resist",id:"resist"},{name:"Char",id:"char"},{name:"Guild",id:"guild"}],Z=function(e){function t(e){var a;return Object(W.a)(this,t),(a=Object(N.a)(this,Object(R.a)(t).call(this,e))).changeTab=function(e){a.setState({activeTab:e})},a.state={activeTab:"stats"},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this,t=this.state.activeTab;return k.a.createElement("div",{className:"character-stats"},k.a.createElement("div",{className:"character-name"},"Reggie Plop Plops"),k.a.createElement("div",{className:"top-tabs"},X.map((function(a){return k.a.createElement("div",{className:"tab ".concat(t===a.id?"active":""),onClick:function(){e.changeTab(a.id)}},a.name)}))),"stats"===t&&k.a.createElement(V,null))}}]),t}(k.a.Component),_={37:"west",38:"north",39:"east",40:"south"},ee={west:[0,0],north:[0,0],east:[1,0],south:[0,1]},te={west:[-1,0],north:[0,-1],east:[1,0],south:[0,1]},ae=new(function(){function e(){var t=this;Object(W.a)(this,e),this.handleKeyDown=function(e){var a=_[e.keyCode];switch(a){case"west":case"north":case"east":case"south":t.moveDirection(a)?H.addMessage("You walked ".concat(a.toUpperCase())):A.playAudio("player","hitwall")}}}return Object(z.a)(e,[{key:"moveDirection",value:function(e){if(this.checkMoveWallCollision(e)){var t=te[e],a=[K.playerLocation[0]+t[0],K.playerLocation[1]+t[1]];return P.level1.markSectionDiscovered(a),K.setPlayerLocation(a),!0}return!1}},{key:"checkMoveWallCollision",value:function(e){var t=ee[e],a=P.getSectionByCoords([K.playerLocation[0]+t[0],K.playerLocation[1]+t[1]]);return"north"===e||"south"===e?a&&"wall"!==a.topWall:a&&"wall"!==a.leftWall}},{key:"setupKeyboardListeners",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"removeKeyboardListeners",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}}]),e}()),ne=Object(Y.a)(I=function(e){function t(e){var a;return Object(W.a)(this,t),(a=Object(N.a)(this,Object(R.a)(t).call(this,e))).state={playerLocation:[15,15]},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"componentWillMount",value:function(){this.context.levelStore.level1.markSectionDiscovered(this.state.playerLocation)}},{key:"componentDidMount",value:function(){ae.setupKeyboardListeners()}},{key:"componentWillUnmount",value:function(){ae.removeKeyboardListeners()}},{key:"render",value:function(){var e=this.context,t=e.levelStore,a=e.playerStore.playerLocation;return k.a.createElement("div",{className:"explore-map"},k.a.createElement("div",{className:"map-container",style:{width:14*t.level1.size,height:14*t.level1.size}},t.level1.levelSections.map((function(e){var n=e.coords[0]===a[0]&&e.coords[1]===a[1],r=t.getSectionDiscovered(e.coords),i="".concat(r.leftWall?"wall-left-"+e.leftWall:""," ").concat(r.topWall?"wall-top-"+e.topWall:""),c=r.tile?"map-square "+i+(n?" player-location":"")+" discovered-"+e.terrain:"map-square "+i;return k.a.createElement("div",{key:e.coords[0]+"-"+e.coords[1],className:c})}))))}}]),t}(G))||I,re=Object(Y.a)(J=function(e){function t(){return Object(W.a)(this,t),Object(N.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.context.messageStore;return k.a.createElement("div",{className:"explore-messages",ref:e.messagePanelScrollRef},k.a.createElement("ul",null,e.messages.map((function(e,t){return k.a.createElement("li",{key:"message-"+t},e.text)}))))}}]),t}(G))||J,ie=function(e){function t(e){var a;return Object(W.a)(this,t),(a=Object(N.a)(this,Object(R.a)(t).call(this,e))).state={},a}return Object(L.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){return k.a.createElement("div",{className:"explore-screen"},k.a.createElement("div",{className:"character-menu"},k.a.createElement(Z,null),k.a.createElement("div",{className:"character-inventory"}),k.a.createElement("div",{className:"party"})),k.a.createElement("div",{className:"explore-pane"},k.a.createElement("div",{className:"expore-encounter"}),k.a.createElement(ne,null),k.a.createElement(re,null)))}}]),t}(k.a.Component);a(21);var ce=function(){return k.a.createElement("div",{className:"App"},k.a.createElement(Q,null),k.a.createElement(ie,null),k.a.createElement($,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));x.a.render(k.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.d11f5691.chunk.js.map