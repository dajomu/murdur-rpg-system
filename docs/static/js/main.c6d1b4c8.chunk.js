(this["webpackJsonpmurdur-rpg-system"]=this["webpackJsonpmurdur-rpg-system"]||[]).push([[0],{13:function(e,t,a){e.exports=a(22)},18:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n,r,i,c,l,o,s,u,m,d,p,h,b,f,v,y,g,O,E,j=a(0),w=a.n(j),S=a(10),k=a.n(S),x=(a(18),a(2)),L=a(5),W=a(7),z=a(6),N=a(8),R=a(3),M=a(4),C=(a(11),a(1)),D=new(n=function(){function e(){var t=this;Object(x.a)(this,e),Object(R.a)(this,"soundEnabled",r,this),Object(R.a)(this,"player",i,this),this.playerAudioRef=w.a.createRef(),this.toggleAudioOn=function(){t.soundEnabled=!t.soundEnabled}}return Object(L.a)(e,[{key:"playAudio",value:function(e,t){"player"===e&&this.player[t]&&this.playerAudioRef.current&&this.soundEnabled&&(this.playerAudioRef.current.src=this.player[t].src,this.playerAudioRef.current.play())}}]),e}(),r=Object(M.a)(n.prototype,"soundEnabled",[C.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=Object(M.a)(n.prototype,"player",[C.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{hitwall:{src:"/murdur-rpg-system/audio/ouch.mp3"}}}}),n),T=function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(x.a)(this,e),this.levelSections=[],this.size=void 0,this.discoveredSections={},this.markSectionDiscovered=function(e){t.discoveredSections["".concat(e[0],"-").concat(e[1])]={tile:!0,modifier:!0,leftWall:!0,topWall:!0},t.discoveredSections["".concat(e[0]+1,"-").concat(e[1])]&&(t.discoveredSections["".concat(e[0]+1,"-").concat(e[1])].leftWall=!0),t.discoveredSections["".concat(e[0],"-").concat(e[1]+1)]&&(t.discoveredSections["".concat(e[0],"-").concat(e[1]+1)].topWall=!0)},this.isSectionDiscovered=function(e){return!!t.discoveredSections["".concat(e[0],"-").concat(e[1])]&&t.discoveredSections["".concat(e[0],"-").concat(e[1])].tile},this.randomlyPopulateMap=function(){for(var e=0;e<t.size;e++)for(var a=0;a<t.size;a++)t.levelSections.push({coords:[a,e],leftWall:t.getRandomWall(),topWall:t.getRandomWall(),terrain:t.getRandomTerrain()}),t.discoveredSections["".concat(a,"-").concat(e)]={tile:!1,modifier:!1,leftWall:!1,topWall:!1}},this.getRandomWall=function(){var e=Math.round(1+4*Math.random());return e>=4?"wall":1===e?"door":"none"},this.getRandomTerrain=function(){switch(Math.round(1+6*Math.random())){case 1:return"sand";case 2:return"water";default:return"none"}},this.size=a,n&&this.randomlyPopulateMap()},A={audioStore:D,levelStore:new(c=function(){function e(){Object(x.a)(this,e),Object(R.a)(this,"level1",l,this),Object(R.a)(this,"markSectionDiscovered",o,this),this.level1=new T(30)}return Object(L.a)(e,[{key:"getSectionDiscovered",value:function(e){return this.level1.discoveredSections["".concat(e[0],"-").concat(e[1])]}},{key:"getSectionByCoords",value:function(e){return this.level1.levelSections.find((function(t){return e[0]===t.coords[0]&&e[1]===t.coords[1]}))}}]),e}(),l=Object(M.a)(c.prototype,"level1",[C.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=Object(M.a)(c.prototype,"markSectionDiscovered",[C.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.level1.markSectionDiscovered(t)}}}),c),messageStore:new(s=function e(){var t=this;Object(x.a)(this,e),Object(R.a)(this,"messages",u,this),this.messagePanelScrollRef=w.a.createRef(),this.addMessage=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";t.messages.push({text:e,type:a}),t.scrollMessagesToBottom()},this.scrollMessagesToBottom=function(){var e=t.messagePanelScrollRef.current;e&&(e.scrollTop=e.scrollHeight)}},u=Object(M.a)(s.prototype,"messages",[C.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{text:"Welcome to MURDUR 0.1!",type:"normal"}]}}),s),playerStore:new(m=function e(){Object(x.a)(this,e),Object(R.a)(this,"age",d,this),Object(R.a)(this,"alignment",p,this),Object(R.a)(this,"race",h,this),Object(R.a)(this,"sex",b,this),Object(R.a)(this,"level",f,this),Object(R.a)(this,"maxHits",v,this),Object(R.a)(this,"currentHits",y,this),Object(R.a)(this,"experience",g,this),Object(R.a)(this,"gold",O,this),Object(R.a)(this,"stats",E,this)},d=Object(M.a)(m.prototype,"age",[C.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),p=Object(M.a)(m.prototype,"alignment",[C.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Good"}}),h=Object(M.a)(m.prototype,"race",[C.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Elf"}}),b=Object(M.a)(m.prototype,"sex",[C.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Female"}}),f=Object(M.a)(m.prototype,"level",[C.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=Object(M.a)(m.prototype,"maxHits",[C.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),y=Object(M.a)(m.prototype,"currentHits",[C.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),g=Object(M.a)(m.prototype,"experience",[C.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),O=Object(M.a)(m.prototype,"gold",[C.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=Object(M.a)(m.prototype,"stats",[C.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{strength:10,intelligence:10,wisdom:10,constitution:10,charisma:10,dexterity:10}}}),m)},H=j.createContext(A),B=function(e){function t(){var e,a;Object(x.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(W.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).context=void 0,a}return Object(N.a)(t,e),t}(j.Component);B.contextType=H;var P,U,Y,G,K=a(9),q=Object(K.a)(P=function(e){function t(){return Object(x.a)(this,t),Object(W.a)(this,Object(z.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.context.audioStore;return w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:"toggle-audio-button",onClick:e.toggleAudioOn},e.soundEnabled?w.a.createElement("img",{src:"/murdur-rpg-system/images/audioOn.png",alt:"switch audio on/off"}):w.a.createElement("img",{src:"/murdur-rpg-system/images/audioOff.png",alt:"switch audio on/off"})),w.a.createElement("audio",{ref:e.playerAudioRef}))}}]),t}(B))||P,F=function(){return w.a.createElement("div",null)},I=Object(K.a)(U=function(e){function t(){return Object(x.a)(this,t),Object(W.a)(this,Object(z.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.context.playerStore;return w.a.createElement("div",{className:"character-info-panel"},w.a.createElement("div",{className:"character-alignment"},"".concat(e.sex," ").concat(e.race," (").concat(e.alignment,") (").concat(e.level,")")),w.a.createElement("ul",{className:"character-current-info"},w.a.createElement("li",{key:"age"},w.a.createElement("span",null,"Age"),w.a.createElement("span",null,e.age)),w.a.createElement("li",{key:"hits"},w.a.createElement("span",null,"Hits"),w.a.createElement("span",null,"".concat(e.currentHits,"/").concat(e.maxHits))),w.a.createElement("li",{key:"xp"},w.a.createElement("span",null,"Experience"),w.a.createElement("span",null,e.experience)),w.a.createElement("li",{key:"gold"},w.a.createElement("span",null,"Gold"),w.a.createElement("span",null,e.gold))),w.a.createElement("ul",{className:"character-stats"},w.a.createElement("li",{key:"strength"},w.a.createElement("span",null,"Strength"),w.a.createElement("span",null,e.stats.strength)),w.a.createElement("li",{key:"intelligence"},w.a.createElement("span",null,"Intelligence"),w.a.createElement("span",null,e.stats.intelligence)),w.a.createElement("li",{key:"wisdom"},w.a.createElement("span",null,"Wisdom"),w.a.createElement("span",null,e.stats.wisdom)),w.a.createElement("li",{key:"constitution"},w.a.createElement("span",null,"Constitution"),w.a.createElement("span",null,e.stats.constitution)),w.a.createElement("li",{key:"charisma"},w.a.createElement("span",null,"Charisma"),w.a.createElement("span",null,e.stats.charisma)),w.a.createElement("li",{key:"dexterity"},w.a.createElement("span",null,"Dexterity"),w.a.createElement("span",null,e.stats.dexterity))))}}]),t}(B))||U,J=[{name:"Stats",id:"stats"},{name:"Resist",id:"resist"},{name:"Char",id:"char"},{name:"Guild",id:"guild"}],$=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(W.a)(this,Object(z.a)(t).call(this,e))).changeTab=function(e){a.setState({activeTab:e})},a.state={activeTab:"stats"},a}return Object(N.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this,t=this.state.activeTab;return w.a.createElement("div",{className:"character-stats"},w.a.createElement("div",{className:"character-name"},"Reggie Plop Plops"),w.a.createElement("div",{className:"top-tabs"},J.map((function(a){return w.a.createElement("div",{className:"tab ".concat(t===a.id?"active":""),onClick:function(){e.changeTab(a.id)}},a.name)}))),"stats"===t&&w.a.createElement(I,null))}}]),t}(w.a.Component),Q=Object(K.a)(Y=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(W.a)(this,Object(z.a)(t).call(this,e))).handleKeyDown=function(e){var t=[a.state.playerLocation[0],a.state.playerLocation[1]];switch(e.keyCode){case 37:var n=a.context.levelStore.getSectionByCoords([a.state.playerLocation[0],a.state.playerLocation[1]]);n&&"wall"!==n.leftWall&&0!==a.state.playerLocation[0]?(t=[a.state.playerLocation[0]-1,a.state.playerLocation[1]],a.context.messageStore.addMessage("You walked WEST")):a.context.audioStore.playAudio("player","hitwall");break;case 38:var r=a.context.levelStore.getSectionByCoords([a.state.playerLocation[0],a.state.playerLocation[1]]);r&&"wall"!==r.topWall&&0!==a.state.playerLocation[1]&&(t=[a.state.playerLocation[0],a.state.playerLocation[1]-1],a.context.messageStore.addMessage("You walked NORTH"));break;case 39:var i=a.context.levelStore.getSectionByCoords([a.state.playerLocation[0]+1,a.state.playerLocation[1]]);i&&"wall"!==i.leftWall&&(t=[a.state.playerLocation[0]+1,a.state.playerLocation[1]],a.context.messageStore.addMessage("You walked EAST"));break;case 40:var c=a.context.levelStore.getSectionByCoords([a.state.playerLocation[0],a.state.playerLocation[1]+1]);c&&"wall"!==c.topWall&&(t=[a.state.playerLocation[0],a.state.playerLocation[1]+1],a.context.messageStore.addMessage("You walked SOUTH"))}a.context.levelStore.level1.markSectionDiscovered(t),a.setState({playerLocation:t})},a.state={playerLocation:[15,15]},a}return Object(N.a)(t,e),Object(L.a)(t,[{key:"componentWillMount",value:function(){this.context.levelStore.level1.markSectionDiscovered(this.state.playerLocation)}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this,t=this.context.levelStore;return w.a.createElement("div",{className:"explore-map"},w.a.createElement("div",{className:"map-container",style:{width:14*t.level1.size,height:14*t.level1.size}},t.level1.levelSections.map((function(a){var n=a.coords[0]===e.state.playerLocation[0]&&a.coords[1]===e.state.playerLocation[1],r=t.getSectionDiscovered(a.coords),i="".concat(r.leftWall?"wall-left-"+a.leftWall:""," ").concat(r.topWall?"wall-top-"+a.topWall:""),c=r.tile?"map-square "+i+(n?" player-location":"")+" discovered-"+a.terrain:"map-square "+i;return w.a.createElement("div",{key:a.coords[0]+"-"+a.coords[1],className:c})}))))}}]),t}(B))||Y,V=Object(K.a)(G=function(e){function t(){return Object(x.a)(this,t),Object(W.a)(this,Object(z.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.context.messageStore;return w.a.createElement("div",{className:"explore-messages",ref:e.messagePanelScrollRef},w.a.createElement("ul",null,e.messages.map((function(e,t){return w.a.createElement("li",{key:"message-"+t},e.text)}))))}}]),t}(B))||G,X=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(W.a)(this,Object(z.a)(t).call(this,e))).state={},a}return Object(N.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){return w.a.createElement("div",{className:"explore-screen"},w.a.createElement("div",{className:"character-menu"},w.a.createElement($,null),w.a.createElement("div",{className:"character-inventory"}),w.a.createElement("div",{className:"party"})),w.a.createElement("div",{className:"explore-pane"},w.a.createElement("div",{className:"expore-encounter"}),w.a.createElement(Q,null),w.a.createElement(V,null)))}}]),t}(w.a.Component);a(21);var Z=function(){return w.a.createElement("div",{className:"App"},w.a.createElement(F,null),w.a.createElement(X,null),w.a.createElement(q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));k.a.render(w.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.c6d1b4c8.chunk.js.map