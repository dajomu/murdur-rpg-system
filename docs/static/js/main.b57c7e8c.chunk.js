(this["webpackJsonpmurdur-rpg-system"]=this["webpackJsonpmurdur-rpg-system"]||[]).push([[0],{13:function(e,t,a){e.exports=a(22)},18:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n,r,i,c,l,o,s,u,m,h,d,p,b,f,y,v,g,O,j,E,w,k=a(0),S=a.n(k),x=a(10),D=a.n(x),W=(a(18),a(2)),z=a(5),C=a(7),N=a(6),R=a(8),L=a(3),M=a(4),A=(a(11),a(1)),P=new(n=function(){function e(){var t=this;Object(W.a)(this,e),Object(L.a)(this,"soundEnabled",r,this),Object(L.a)(this,"player",i,this),this.playerAudioRef=S.a.createRef(),this.toggleAudioOn=function(){t.soundEnabled=!t.soundEnabled}}return Object(z.a)(e,[{key:"playAudio",value:function(e,t){"player"===e&&this.player[t]&&this.playerAudioRef.current&&this.soundEnabled&&this.playerAudioRef.current.paused&&(this.playerAudioRef.current.src=this.player[t].src,this.playerAudioRef.current.play())}}]),e}(),r=Object(M.a)(n.prototype,"soundEnabled",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=Object(M.a)(n.prototype,"player",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{hitwall:{src:"/murdur-rpg-system/audio/ouch.mp3"}}}}),n),T=function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(W.a)(this,e),this.levelSections=[],this.size=void 0,this.discoveredSections={},this.markSectionDiscovered=function(e){t.discoveredSections["".concat(e[0],"-").concat(e[1])]={tile:!0,modifier:!0,leftWall:!0,topWall:!0},t.discoveredSections["".concat(e[0]+1,"-").concat(e[1])]&&(t.discoveredSections["".concat(e[0]+1,"-").concat(e[1])].leftWall=!0),t.discoveredSections["".concat(e[0],"-").concat(e[1]+1)]&&(t.discoveredSections["".concat(e[0],"-").concat(e[1]+1)].topWall=!0)},this.isSectionDiscovered=function(e){return!!t.discoveredSections["".concat(e[0],"-").concat(e[1])]&&t.discoveredSections["".concat(e[0],"-").concat(e[1])].tile},this.randomlyPopulateMap=function(){for(var e=0;e<t.size;e++)for(var a=0;a<t.size;a++)t.levelSections.push({coords:[a,e],leftWall:t.getRandomWall(),topWall:t.getRandomWall(),terrain:t.getRandomTerrain()}),t.discoveredSections["".concat(a,"-").concat(e)]={tile:!1,modifier:!1,leftWall:!1,topWall:!1}},this.getRandomWall=function(){var e=Math.round(1+4*Math.random());return e>=4?"wall":1===e?"door":"none"},this.getRandomTerrain=function(){switch(Math.round(1+6*Math.random())){case 1:return"sand";case 2:return"water";default:return"none"}},this.size=a,n&&this.randomlyPopulateMap()},H=new(c=function(){function e(){Object(W.a)(this,e),Object(L.a)(this,"level1",l,this),Object(L.a)(this,"markSectionDiscovered",o,this),this.level1=new T(30)}return Object(z.a)(e,[{key:"getSectionDiscovered",value:function(e){return this.level1.discoveredSections["".concat(e[0],"-").concat(e[1])]}},{key:"getSectionByCoords",value:function(e){return this.level1.levelSections.find((function(t){return e[0]===t.coords[0]&&e[1]===t.coords[1]}))}}]),e}(),l=Object(M.a)(c.prototype,"level1",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=Object(M.a)(c.prototype,"markSectionDiscovered",[A.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.level1.markSectionDiscovered(t)}}}),c),K=new(s=function e(){var t=this;Object(W.a)(this,e),Object(L.a)(this,"messages",u,this),this.messagePanelScrollRef=S.a.createRef(),this.addMessage=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";t.messages.push({text:e,type:a}),t.scrollMessagesToBottom()},this.scrollMessagesToBottom=function(){var e=t.messagePanelScrollRef.current;e&&(e.scrollTop=e.scrollHeight)}},u=Object(M.a)(s.prototype,"messages",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{text:"Welcome to MURDUR 0.1!",type:"normal"}]}}),s),B={west:"north",north:"east",east:"south",south:"west"},U={west:"south",north:"west",east:"north",south:"east"},G=new(m=function e(){var t=this;Object(W.a)(this,e),Object(L.a)(this,"age",h,this),Object(L.a)(this,"alignment",d,this),Object(L.a)(this,"race",p,this),Object(L.a)(this,"sex",b,this),Object(L.a)(this,"level",f,this),Object(L.a)(this,"maxHits",y,this),Object(L.a)(this,"currentHits",v,this),Object(L.a)(this,"experience",g,this),Object(L.a)(this,"gold",O,this),Object(L.a)(this,"stats",j,this),Object(L.a)(this,"playerLocation",E,this),Object(L.a)(this,"playerDirection",w,this),this.setPlayerLocation=function(e){t.playerLocation=e},this.rotatePlayerClockwise=function(){t.playerDirection=B[t.playerDirection]},this.rotatePlayerCounterClockwise=function(){t.playerDirection=U[t.playerDirection]}},h=Object(M.a)(m.prototype,"age",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),d=Object(M.a)(m.prototype,"alignment",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Good"}}),p=Object(M.a)(m.prototype,"race",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Elf"}}),b=Object(M.a)(m.prototype,"sex",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Female"}}),f=Object(M.a)(m.prototype,"level",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=Object(M.a)(m.prototype,"maxHits",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),v=Object(M.a)(m.prototype,"currentHits",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),g=Object(M.a)(m.prototype,"experience",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),O=Object(M.a)(m.prototype,"gold",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=Object(M.a)(m.prototype,"stats",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{strength:10,intelligence:10,wisdom:10,constitution:10,charisma:10,dexterity:10}}}),E=Object(M.a)(m.prototype,"playerLocation",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[15,15]}}),w=Object(M.a)(m.prototype,"playerDirection",[A.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"north"}}),m),q={audioStore:P,levelStore:H,messageStore:K,playerStore:G},F=k.createContext(q),I=function(e){function t(){var e,a;Object(W.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(C.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).context=void 0,a}return Object(R.a)(t,e),t}(k.Component);I.contextType=F;var J,Y,$,Q,V=a(9),X=Object(V.a)(J=function(e){function t(){return Object(W.a)(this,t),Object(C.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.context.audioStore;return S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"toggle-audio-button",onClick:e.toggleAudioOn},e.soundEnabled?S.a.createElement("img",{src:"/murdur-rpg-system/images/audioOn.png",alt:"switch audio on/off"}):S.a.createElement("img",{src:"/murdur-rpg-system/images/audioOff.png",alt:"switch audio on/off"})),S.a.createElement("audio",{ref:e.playerAudioRef}))}}]),t}(I))||J,Z=function(){return S.a.createElement("div",null)},_=Object(V.a)(Y=function(e){function t(){return Object(W.a)(this,t),Object(C.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.context.playerStore;return S.a.createElement("div",{className:"character-info-panel"},S.a.createElement("div",{className:"character-alignment"},"".concat(e.sex," ").concat(e.race," (").concat(e.alignment,") (").concat(e.level,")")),S.a.createElement("ul",{className:"character-current-info"},S.a.createElement("li",{key:"age"},S.a.createElement("span",null,"Age"),S.a.createElement("span",null,e.age)),S.a.createElement("li",{key:"hits"},S.a.createElement("span",null,"Hits"),S.a.createElement("span",null,"".concat(e.currentHits,"/").concat(e.maxHits))),S.a.createElement("li",{key:"xp"},S.a.createElement("span",null,"Experience"),S.a.createElement("span",null,e.experience)),S.a.createElement("li",{key:"gold"},S.a.createElement("span",null,"Gold"),S.a.createElement("span",null,e.gold))),S.a.createElement("ul",{className:"character-stats"},S.a.createElement("li",{key:"strength"},S.a.createElement("span",null,"Strength"),S.a.createElement("span",null,e.stats.strength)),S.a.createElement("li",{key:"intelligence"},S.a.createElement("span",null,"Intelligence"),S.a.createElement("span",null,e.stats.intelligence)),S.a.createElement("li",{key:"wisdom"},S.a.createElement("span",null,"Wisdom"),S.a.createElement("span",null,e.stats.wisdom)),S.a.createElement("li",{key:"constitution"},S.a.createElement("span",null,"Constitution"),S.a.createElement("span",null,e.stats.constitution)),S.a.createElement("li",{key:"charisma"},S.a.createElement("span",null,"Charisma"),S.a.createElement("span",null,e.stats.charisma)),S.a.createElement("li",{key:"dexterity"},S.a.createElement("span",null,"Dexterity"),S.a.createElement("span",null,e.stats.dexterity))))}}]),t}(I))||Y,ee=[{name:"Stats",id:"stats"},{name:"Resist",id:"resist"},{name:"Char",id:"char"},{name:"Guild",id:"guild"}],te=function(e){function t(e){var a;return Object(W.a)(this,t),(a=Object(C.a)(this,Object(N.a)(t).call(this,e))).changeTab=function(e){a.setState({activeTab:e})},a.state={activeTab:"stats"},a}return Object(R.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this,t=this.state.activeTab;return S.a.createElement("div",{className:"character-stats"},S.a.createElement("div",{className:"character-name"},"Reggie Plop Plops"),S.a.createElement("div",{className:"top-tabs"},ee.map((function(a){return S.a.createElement("div",{className:"tab ".concat(t===a.id?"active":""),onClick:function(){e.changeTab(a.id)}},a.name)}))),"stats"===t&&S.a.createElement(_,null))}}]),t}(S.a.Component),ae={37:"counter-clockwise",38:"forward",39:"clockwise",40:"backward"},ne={west:[0,0],north:[0,0],east:[1,0],south:[0,1]},re={west:[-1,0],north:[0,-1],east:[1,0],south:[0,1]},ie=new(function(){function e(){var t=this;Object(W.a)(this,e),this.handleKeyDown=function(e){var a=ae[e.keyCode];switch(a){case"counter-clockwise":G.rotatePlayerCounterClockwise();break;case"clockwise":G.rotatePlayerClockwise();break;case"forward":t.moveDirection(G.playerDirection)?K.addMessage("You walked ".concat(a.toUpperCase())):P.playAudio("player","hitwall")}}}return Object(z.a)(e,[{key:"moveDirection",value:function(e){if(this.checkMoveWallCollision(e)){var t=re[e],a=[G.playerLocation[0]+t[0],G.playerLocation[1]+t[1]];return H.level1.markSectionDiscovered(a),G.setPlayerLocation(a),!0}return!1}},{key:"checkMoveWallCollision",value:function(e){var t=ne[e],a=H.getSectionByCoords([G.playerLocation[0]+t[0],G.playerLocation[1]+t[1]]);return"north"===e||"south"===e?a&&"wall"!==a.topWall&&G.playerLocation[1]+t[1]>=1:a&&"wall"!==a.leftWall&&G.playerLocation[0]+t[0]>=1}},{key:"setupKeyboardListeners",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"removeKeyboardListeners",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}}]),e}()),ce=Object(V.a)($=function(e){function t(){return Object(W.a)(this,t),Object(C.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(z.a)(t,[{key:"componentWillMount",value:function(){this.context.levelStore.level1.markSectionDiscovered(this.context.playerStore.playerLocation)}},{key:"componentDidMount",value:function(){ie.setupKeyboardListeners()}},{key:"componentWillUnmount",value:function(){ie.removeKeyboardListeners()}},{key:"render",value:function(){var e=this.context,t=e.levelStore,a=e.playerStore,n=a.playerLocation,r=a.playerDirection;return S.a.createElement("div",{className:"explore-map"},S.a.createElement("div",{className:"map-container",style:{width:14*t.level1.size,height:14*t.level1.size}},t.level1.levelSections.map((function(e){var a=e.coords[0]===n[0]&&e.coords[1]===n[1],i=t.getSectionDiscovered(e.coords),c="".concat(i.leftWall?"wall-left-"+e.leftWall:""," ").concat(i.topWall?"wall-top-"+e.topWall:""),l=i.tile?"map-square "+c+" discovered-"+e.terrain:"map-square "+c;return S.a.createElement("div",{key:e.coords[0]+"-"+e.coords[1],className:l},a?S.a.createElement("img",{src:"/murdur-rpg-system/images/arrowUp-pink.png",alt:"player",className:"player-sprite "+r}):null)}))))}}]),t}(I))||$,le=Object(V.a)(Q=function(e){function t(){return Object(W.a)(this,t),Object(C.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.context.messageStore;return S.a.createElement("div",{className:"explore-messages",ref:e.messagePanelScrollRef},S.a.createElement("ul",null,e.messages.map((function(e,t){return S.a.createElement("li",{key:"message-"+t},e.text)}))))}}]),t}(I))||Q,oe=function(e){function t(e){var a;return Object(W.a)(this,t),(a=Object(C.a)(this,Object(N.a)(t).call(this,e))).state={},a}return Object(R.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){return S.a.createElement("div",{className:"explore-screen"},S.a.createElement("div",{className:"character-menu"},S.a.createElement(te,null),S.a.createElement("div",{className:"character-inventory"}),S.a.createElement("div",{className:"party"})),S.a.createElement("div",{className:"explore-pane"},S.a.createElement("div",{className:"expore-encounter"}),S.a.createElement(ce,null),S.a.createElement(le,null)))}}]),t}(S.a.Component);a(21);var se=function(){return S.a.createElement("div",{className:"App"},S.a.createElement(Z,null),S.a.createElement(oe,null),S.a.createElement(X,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));D.a.render(S.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.b57c7e8c.chunk.js.map